{"ast":null,"code":"import React,{useContext,useState}from'react';import{Link}from'react-router-dom';import{StudentContext}from'../context/StudentContext';import'../styles/ClassSelector.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ClassSelector=_ref=>{let{isEmbedded}=_ref;const{classes,isLoading,error,uploadCustomData,loadDefaultData}=useContext(StudentContext);const[fileError,setFileError]=useState(\"\");const[uploadSuccess,setUploadSuccess]=useState(false);const handleFileUpload=e=>{const file=e.target.files[0];if(!file){return;}if(file.type!=='text/csv'){setFileError(\"Please upload a CSV file\");return;}try{uploadCustomData(file);setFileError(\"\");setUploadSuccess(true);// Reset success message after 3 seconds\nsetTimeout(()=>{setUploadSuccess(false);},3000);}catch(err){setFileError(\"Error uploading file: \"+err.message);}};const handleResetToDefault=()=>{loadDefaultData();};return/*#__PURE__*/_jsxs(\"div\",{className:\"class-selector-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"class-selector-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"PFLX Class Tools\"}),!isEmbedded&&/*#__PURE__*/_jsx(\"div\",{className:\"subtitle\",children:\"Select a class to continue\"})]}),isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading class data...\"}):error?/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"classes-grid\",children:classes.map(classItem=>/*#__PURE__*/_jsxs(\"div\",{className:\"class-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:classItem.name}),/*#__PURE__*/_jsxs(\"p\",{children:[classItem.studentCount,\" students\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"class-card-actions\",children:[/*#__PURE__*/_jsx(Link,{to:`/teams/${classItem.id}`,className:\"button team-button\",children:\"Create Teams\"}),/*#__PURE__*/_jsx(Link,{to:`/randomizer/${classItem.id}`,className:\"button randomizer-button\",children:\"Random Student\"})]})]},classItem.id))}),!isEmbedded&&/*#__PURE__*/_jsxs(\"div\",{className:\"csv-upload-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Upload Custom Class Data\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Upload a CSV file with student data in one of these formats:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"csv-format-list\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Option 1:\"}),\" \",/*#__PURE__*/_jsx(\"code\",{children:\"first_name, last_name, class\"}),\" columns\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Option 2:\"}),\" \",/*#__PURE__*/_jsx(\"code\",{children:\"name, class\"}),\" columns (full name in one field)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"template-download\",children:/*#__PURE__*/_jsx(\"a\",{href:\"./template.csv\",download:\"student_roster_template.csv\",className:\"template-link\",children:\"Download Template CSV\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-upload-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"csv-upload\",accept:\".csv\",onChange:handleFileUpload,className:\"file-input\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"csv-upload\",className:\"file-upload-button\",children:\"Choose CSV File\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleResetToDefault,className:\"reset-button\",children:\"Reset to Default Data\"})]}),fileError&&/*#__PURE__*/_jsx(\"div\",{className:\"upload-error\",children:fileError}),uploadSuccess&&/*#__PURE__*/_jsx(\"div\",{className:\"upload-success\",children:\"File uploaded successfully!\"})]})]})]});};export default ClassSelector;","map":{"version":3,"names":["React","useContext","useState","Link","StudentContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ClassSelector","_ref","isEmbedded","classes","isLoading","error","uploadCustomData","loadDefaultData","fileError","setFileError","uploadSuccess","setUploadSuccess","handleFileUpload","e","file","target","files","type","setTimeout","err","message","handleResetToDefault","className","children","map","classItem","name","studentCount","to","id","href","download","accept","onChange","htmlFor","onClick"],"sources":["/Users/ejohnson/Desktop/pflx-class-tools-new/src/components/ClassSelector.jsx"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { StudentContext } from '../context/StudentContext';\nimport '../styles/ClassSelector.css';\n\nconst ClassSelector = ({ isEmbedded }) => {\n  const { classes, isLoading, error, uploadCustomData, loadDefaultData } = useContext(StudentContext);\n  const [fileError, setFileError] = useState(\"\");\n  const [uploadSuccess, setUploadSuccess] = useState(false);\n\n  const handleFileUpload = (e) => {\n    const file = e.target.files[0];\n    \n    if (!file) {\n      return;\n    }\n    \n    if (file.type !== 'text/csv') {\n      setFileError(\"Please upload a CSV file\");\n      return;\n    }\n    \n    try {\n      uploadCustomData(file);\n      setFileError(\"\");\n      setUploadSuccess(true);\n      \n      // Reset success message after 3 seconds\n      setTimeout(() => {\n        setUploadSuccess(false);\n      }, 3000);\n    } catch (err) {\n      setFileError(\"Error uploading file: \" + err.message);\n    }\n  };\n\n  const handleResetToDefault = () => {\n    loadDefaultData();\n  };\n\n  return (\n    <div className=\"class-selector-container\">\n      <div className=\"class-selector-header\">\n        <h1 className=\"title\">PFLX Class Tools</h1>\n        {!isEmbedded && <div className=\"subtitle\">Select a class to continue</div>}\n      </div>\n      \n      {isLoading ? (\n        <div className=\"loading\">Loading class data...</div>\n      ) : error ? (\n        <div className=\"error-message\">{error}</div>\n      ) : (\n        <>\n          <div className=\"classes-grid\">\n            {classes.map((classItem) => (\n              <div className=\"class-card\" key={classItem.id}>\n                <h2>{classItem.name}</h2>\n                <p>{classItem.studentCount} students</p>\n                <div className=\"class-card-actions\">\n                  <Link \n                    to={`/teams/${classItem.id}`} \n                    className=\"button team-button\"\n                  >\n                    Create Teams\n                  </Link>\n                  <Link \n                    to={`/randomizer/${classItem.id}`} \n                    className=\"button randomizer-button\"\n                  >\n                    Random Student\n                  </Link>\n                </div>\n              </div>\n            ))}\n          </div>\n          \n          {!isEmbedded && (\n            <div className=\"csv-upload-section\">\n              <h3>Upload Custom Class Data</h3>\n              <p>Upload a CSV file with student data in one of these formats:</p>\n              <ul className=\"csv-format-list\">\n                <li><strong>Option 1:</strong> <code>first_name, last_name, class</code> columns</li>\n                <li><strong>Option 2:</strong> <code>name, class</code> columns (full name in one field)</li>\n              </ul>\n              \n              <div className=\"template-download\">\n                <a \n                  href=\"./template.csv\" \n                  download=\"student_roster_template.csv\"\n                  className=\"template-link\"\n                >\n                  Download Template CSV\n                </a>\n              </div>\n              \n              <div className=\"file-upload-container\">\n                <input \n                  type=\"file\" \n                  id=\"csv-upload\" \n                  accept=\".csv\" \n                  onChange={handleFileUpload}\n                  className=\"file-input\"\n                />\n                <label htmlFor=\"csv-upload\" className=\"file-upload-button\">\n                  Choose CSV File\n                </label>\n                \n                <button \n                  onClick={handleResetToDefault} \n                  className=\"reset-button\"\n                >\n                  Reset to Default Data\n                </button>\n              </div>\n              \n              {fileError && <div className=\"upload-error\">{fileError}</div>}\n              {uploadSuccess && <div className=\"upload-success\">File uploaded successfully!</div>}\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default ClassSelector;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}